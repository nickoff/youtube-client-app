"use strict";(self.webpackChunkyoutube_client_app=self.webpackChunkyoutube_client_app||[]).push([[887],{4887:(b,h,l)=>{l.r(h),l.d(h,{AuthModule:()=>K});var d=l(6814),n=l(6223),m=l(4087),u=l(1993),C=l(2659),o=l(5247);const g={[o.C4.symbolRequired]:/[@!#?]+/,[o.C4.upperCaseRequired]:/[A-Z]+/,[o.C4.lowerCaseRequired]:/[a-z]+/,[o.C4.numericRequired]:/[0-9]+/},f={[o.C4.symbolRequired]:"Symbol (@, !, #, ?) required",[o.C4.upperCaseRequired]:"Uppercase letter required",[o.C4.lowerCaseRequired]:"Lowercase letter required",[o.C4.numericRequired]:"Number required",[o.C4.lengthRequired]:"Password must be at least 8 characters long"},w={[o.TB.required]:"Please enter a login email",[o.TB.invalidEmail]:"Invalid email. Example: info@example.com"},x={[o.uf.required]:"Please enter a password",[o.uf.invalidPassword]:"Your password isn't strong enough"},c={[o.v3.required]:{title:"Please enter a title",description:"Please enter a description",img:"Please enter a link to the image",linkVideo:"Please enter a link to the video",creationDate:"Please enter a creation date",tags:"Please add at least one tag"},[o.v3.minlength]:{title:"The title is too short"},[o.v3.maxlength]:{title:"The title is too long",description:"The description is too long"},[o.v3.dateNotFuture]:"Date should not be in the future"};var t=l(5879),S=l(5535),E=l(6034),_=l(2490);function O(e,s){if(1&e&&(t.TgZ(0,"span",10),t._uU(1),t.qZA()),2&e){const r=t.oxw();t.xp6(1),t.Oqu(r.emailErrors)}}function y(e,s){if(1&e&&(t.TgZ(0,"span",10),t._uU(1),t.qZA()),2&e){const r=t.oxw();t.xp6(1),t.Oqu(r.passwordErrors)}}function T(e,s){if(1&e&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&e){const r=s.$implicit,a=t.oxw(2);t.xp6(1),t.Oqu(null==a.nonRequiredPasswordError?null:a.nonRequiredPasswordError[r])}}function q(e,s){if(1&e&&(t.TgZ(0,"ul",10),t.YNc(1,T,2,1,"li",11),t.qZA()),2&e){const r=t.oxw();t.xp6(1),t.Q6J("ngForOf",r.errorKeys)}}let M=(()=>{class e{constructor(r,a,i,p){this.authStateService=r,this.navigateService=a,this.destroyRef=i,this.cdr=p,this.isSubmitted=!1,this.credentials=new n.cw({email:new n.NI("",{nonNullable:!0,validators:[n.kI.required,n.kI.email]}),password:new n.NI("",{nonNullable:!0,validators:[n.kI.required,e=>{const{value:s}=e;if(!s)return null;const r={};return[{test:g.symbolRequired.test(s),error:o.C4.symbolRequired},{test:g.upperCaseRequired.test(s),error:o.C4.upperCaseRequired},{test:g.lowerCaseRequired.test(s),error:o.C4.lowerCaseRequired},{test:g.numericRequired.test(s),error:o.C4.numericRequired},{test:s.length>8,error:o.C4.lengthRequired}].forEach(i=>{i.test||(r[i.error]=f[i.error])}),Object.keys(r).length?r:null}]})}),this.password=this.credentials.controls.password,this.email=this.credentials.controls.email,this.isShowEmailError=!1,this.isShowPasswordError=!1,this.isShowNonRequiredPasswordErrors=!1}ngOnInit(){this.credentials.valueChanges.pipe((0,u.sL)(this.destroyRef)).subscribe(()=>{this.refreshErrorsState(),this.cdr.markForCheck()})}onSubmit(){this.isSubmitted=!0,this.refreshErrorsState(),this.credentials.valid&&(this.authStateService.authenticate(),localStorage.setItem(C.B,C.x),this.navigateService.navigateToRoot())}getShowEmailError(){return null!==this.email.errors&&this.email.errors&&(this.email.dirty||this.isSubmitted)}getEmailErrors(){return null!==this.email.errors&&(this.email.errors[o.TB.invalidEmail]&&w.email||this.email.errors[o.TB.required]&&w.required)}getShowPasswordError(){return null!==this.password.errors&&this.password.errors&&(this.password.dirty||this.isSubmitted)}getShowNonRequiredPasswordErrors(){return null!==this.password.errors&&this.password.errors&&!this.password.errors[o.uf.required]&&this.password.dirty}getPasswordErrors(){return null!==this.password.errors&&(this.password.errors[o.uf.required]&&x.required||this.password.errors&&x.validatePasswordStrength)}getPasswordErrorKeys(){return this.password.errors?Object.keys(this.password.errors):[]}getNonRequiredPasswordError(){return this.password.errors??void 0}refreshErrorsState(){this.errorKeys=this.getPasswordErrorKeys(),this.isShowEmailError=this.getShowEmailError(),this.emailErrors=this.getEmailErrors(),this.isShowPasswordError=this.getShowPasswordError(),this.passwordErrors=this.getPasswordErrors(),this.isShowNonRequiredPasswordErrors=this.getShowNonRequiredPasswordErrors(),this.nonRequiredPasswordError=this.getNonRequiredPasswordError()}static#t=this.\u0275fac=function(a){return new(a||e)(t.Y36(S.V),t.Y36(E.o),t.Y36(t.ktI),t.Y36(t.sBO))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-login"]],decls:18,vars:4,consts:[[1,"login"],[1,"login--title"],[1,"login--form",3,"formGroup","ngSubmit"],[1,"input-label"],["for","email"],["class","login--form-error",4,"ngIf"],["formControlName","email","id","email","type","email","placeholder","Enter email"],["for","password"],["formControlName","password","id","password","type","password","placeholder","Enter password"],["type","submit",1,"login--form-button"],[1,"login--form-error"],[4,"ngFor","ngForOf"]],template:function(a,i){1&a&&(t.TgZ(0,"div",0)(1,"h2",1),t._uU(2,"Login"),t.qZA(),t.TgZ(3,"form",2),t.NdJ("ngSubmit",function(){return i.onSubmit()}),t.TgZ(4,"div",3)(5,"label",4),t._uU(6,"login"),t.qZA(),t.YNc(7,O,2,1,"span",5),t.qZA(),t._UZ(8,"input",6),t.TgZ(9,"div",3)(10,"label",7),t._uU(11,"password"),t.qZA(),t.YNc(12,y,2,1,"span",5),t.qZA(),t._UZ(13,"input",8),t.TgZ(14,"div",3),t.YNc(15,q,2,1,"ul",5),t.TgZ(16,"app-button",9),t._uU(17,"Login"),t.qZA()()()()),2&a&&(t.xp6(3),t.Q6J("formGroup",i.credentials),t.xp6(4),t.Q6J("ngIf",i.isShowEmailError),t.xp6(5),t.Q6J("ngIf",i.isShowPasswordError),t.xp6(3),t.Q6J("ngIf",i.isShowNonRequiredPasswordErrors))},dependencies:[d.sg,d.O5,_.r,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u],styles:["[_nghost-%COMP%]{display:block;width:100%}.login[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;background:#F2F2F2;max-width:350px;margin:45px auto;padding:27px 20px;font-style:normal;line-height:normal;border-radius:5px}.login--form-button[_ngcontent-%COMP%]{margin-top:40px;margin-left:auto}.login--form-error[_ngcontent-%COMP%]{color:#d83e3e;font-size:10px;margin:0;padding-inline-start:20px}.login--title[_ngcontent-%COMP%]{width:100%;color:#000;font-size:18px;line-height:22px;font-weight:700;text-align:start;margin-bottom:5px}.login--form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:space-between;width:100%}.login--form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:10px;color:#828282;padding-left:5px;margin-bottom:4px}.login--form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:block;width:100%;background-color:#e0e0e0;border:none;font-size:12px;color:#000;padding:12px 9px;margin-bottom:5px;border:solid 1px transparent}.login--form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none}.login--form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#929292;font-size:10px}.login--form[_ngcontent-%COMP%]   input.ng-valid[_ngcontent-%COMP%]{border:solid 1px #117C23}.login--form[_ngcontent-%COMP%]   input.ng-invalid.ng-dirty.ng-touched[_ngcontent-%COMP%]{border:solid 1px #D83E3E}.login--form[_ngcontent-%COMP%]   .input-label[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:space-between;font-size:10px;color:#d83e3e}.login[_ngcontent-%COMP%]   form.ng-submitted[_ngcontent-%COMP%]   input.ng-invalid[_ngcontent-%COMP%]{border:solid 1px #D83E3E}"],changeDetection:0})}return e})();var Z=l(9287),A=l(1503),k=l(4221);function I(e,s){if(1&e&&(t.TgZ(0,"span",21),t._uU(1),t.qZA()),2&e){const r=t.oxw();t.xp6(1),t.Oqu(r.titleErrors)}}function D(e,s){if(1&e&&(t.TgZ(0,"span",21),t._uU(1),t.qZA()),2&e){const r=t.oxw();t.xp6(1),t.Oqu(r.descriptionErrors)}}function U(e,s){if(1&e&&(t.TgZ(0,"span",21),t._uU(1),t.qZA()),2&e){const r=t.oxw();t.xp6(1),t.Oqu(r.imgErrors)}}function F(e,s){if(1&e&&(t.TgZ(0,"span",21),t._uU(1),t.qZA()),2&e){const r=t.oxw();t.xp6(1),t.Oqu(r.linkVideoErrors)}}function L(e,s){if(1&e&&(t.TgZ(0,"span",21),t._uU(1),t.qZA()),2&e){const r=t.oxw();t.xp6(1),t.Oqu(r.creationDateErrors)}}function J(e,s){if(1&e&&(t.TgZ(0,"span",21),t._uU(1),t.qZA()),2&e){const r=t.oxw();t.xp6(1),t.Oqu(r.tagsError)}}function Y(e,s){if(1&e&&(t.TgZ(0,"div",22),t._UZ(1,"input",23),t.qZA()),2&e){const r=s.index;t.xp6(1),t.Q6J("formControlName",r)}}function B(e,s){if(1&e){const r=t.EpF();t.TgZ(0,"button",24),t.NdJ("click",function(){t.CHM(r);const i=t.oxw();return t.KtG(i.addTag())}),t._uU(1,"add tag"),t.qZA()}}const j=[{path:"login",component:M},{path:"admin",component:(()=>{class e{constructor(r,a,i,p){this.store=r,this.navigateService=a,this.destroyRef=i,this.cdr=p,this.isSubmitted=!1,this.maxCountTags=5,this.dataNewCard=new n.cw({title:new n.NI("",{nonNullable:!0,validators:[n.kI.required,n.kI.minLength(3),n.kI.maxLength(20)]}),description:new n.NI("",{nonNullable:!0,validators:[n.kI.maxLength(255)]}),img:new n.NI("",{nonNullable:!0,validators:[n.kI.required]}),linkVideo:new n.NI("",{nonNullable:!0,validators:[n.kI.required]}),creationDate:new n.NI("",{nonNullable:!0,validators:[n.kI.required,e=>{const{value:s}=e;if(!s)return null;const r={};return Date.now()<Date.parse(s)&&(r[A.v3.dateNotFuture]="The date is invalid"),Object.keys(r).length?r:null}]}),tags:new n.Oe([this.createTag()])}),this.isShowTitleError=!1,this.isShowDescriptionError=!1,this.isShowImgError=!1,this.isShowLinkVideoError=!1,this.isShowCreationDateError=!1,this.isShowTagsError=!1,this.isShowTagsAddButton=!0}ngOnInit(){this.initFormControls(),this.dataNewCard.valueChanges.pipe((0,u.sL)(this.destroyRef)).subscribe(()=>{this.refreshErrorsState(),this.cdr.markForCheck()})}onSubmit(){this.isSubmitted=!0,this.refreshErrorsState(),this.dataNewCard.valid&&(this.store.dispatch(Z.addCustomCard({customCard:this.dataNewCard.value})),this.onReset(),this.navigateService.navigateToListPage())}onReset(){this.dataNewCard.reset(),this.tags.clear(),this.tags.push(this.createTag())}addTag(){this.tags.length>=this.maxCountTags||!this.tags.valid||this.tags.push(this.createTag())}getShowError(r){return null!==r.errors&&r.errors&&(r.dirty||this.isSubmitted)}getShowTagsError(){return this.tags.invalid&&this.tags.invalid&&(this.tags.dirty||this.isSubmitted)}getTitleError(){return this.title.errors?.[o.v3.minlength]&&c.minlength.title||this.title.errors?.[o.v3.maxlength]&&c.maxlength.title||this.title.errors?.[o.v3.required]&&c.required.title}getDescriptionError(){return this.description.errors?.[o.v3.maxlength]&&c.maxlength.description}getImgError(){return this.img.errors?.[o.v3.required]&&c.required.img}getLinkVideoError(){return this.linkVideo.errors?.[o.v3.required]&&c.required.linkVideo}getCreationDateError(){return this.creationDate.errors?.[o.v3.dateNotFuture]&&c.dateNotFuture||this.creationDate.errors?.[o.v3.required]&&c.required.creationDate}createTag(){return new n.NI("",[n.kI.required])}refreshErrorsState(){this.initErrorsDesplayConditions(),this.initTextErrors()}initErrorsDesplayConditions(){this.isShowTitleError=this.getShowError(this.title),this.isShowDescriptionError=this.getShowError(this.description),this.isShowImgError=this.getShowError(this.img),this.isShowLinkVideoError=this.getShowError(this.linkVideo),this.isShowCreationDateError=this.getShowError(this.creationDate),this.isShowTagsError=this.getShowTagsError(),this.isShowTagsAddButton=this.tags.length<this.maxCountTags||this.tags.invalid}initTextErrors(){this.titleErrors=this.getTitleError(),this.descriptionErrors=this.getDescriptionError(),this.imgErrors=this.getImgError(),this.linkVideoErrors=this.getLinkVideoError(),this.creationDateErrors=this.getCreationDateError(),this.tagsError=c.required.tags}initFormControls(){({title:this.title,description:this.description,img:this.img,linkVideo:this.linkVideo,creationDate:this.creationDate,tags:this.tags}=this.dataNewCard.controls)}static#t=this.\u0275fac=function(a){return new(a||e)(t.Y36(k.yh),t.Y36(E.o),t.Y36(t.ktI),t.Y36(t.sBO))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-admin"]],decls:41,vars:9,consts:[[1,"admin"],[1,"admin--title"],[1,"admin--form",3,"formGroup","ngSubmit"],[1,"input-label"],["for","title"],["class","login--form-error",4,"ngIf"],["formControlName","title","id","title","type","text","placeholder","Enter title"],["for","description"],["formControlName","description","id","description","type","text","placeholder","Enter description"],["for","img"],["formControlName","img","id","img","type","text","placeholder","Enter https link to image"],["for","link-video"],["formControlName","linkVideo","id","link-video","type","text","placeholder","Enter https link to video"],["for","creationDate"],["formControlName","creationDate","id","creationDate","type","date"],["for","tags"],[1,"tags"],["class","tag","formArrayName","tags",4,"ngFor","ngForOf"],["class","tags-button","type","button",3,"click",4,"ngIf"],["type","submit",1,"admin--form-button"],["type","button",1,"admin--form-button",3,"click"],[1,"login--form-error"],["formArrayName","tags",1,"tag"],["type","text","placeholder","Enter text to tag",3,"formControlName"],["type","button",1,"tags-button",3,"click"]],template:function(a,i){1&a&&(t.TgZ(0,"div",0)(1,"h2",1),t._uU(2,"Create new card"),t.qZA(),t.TgZ(3,"form",2),t.NdJ("ngSubmit",function(){return i.onSubmit()}),t.TgZ(4,"div",3)(5,"label",4),t._uU(6,"Title"),t.qZA(),t.YNc(7,I,2,1,"span",5),t.qZA(),t._UZ(8,"input",6),t.TgZ(9,"div",3)(10,"label",7),t._uU(11,"Description"),t.qZA(),t.YNc(12,D,2,1,"span",5),t.qZA(),t._UZ(13,"input",8),t.TgZ(14,"div",3)(15,"label",9),t._uU(16,"Img"),t.qZA(),t.YNc(17,U,2,1,"span",5),t.qZA(),t._UZ(18,"input",10),t.TgZ(19,"div",3)(20,"label",11),t._uU(21,"Link video"),t.qZA(),t.YNc(22,F,2,1,"span",5),t.qZA(),t._UZ(23,"input",12),t.TgZ(24,"div",3)(25,"label",13),t._uU(26,"Creation date"),t.qZA(),t.YNc(27,L,2,1,"span",5),t.qZA(),t._UZ(28,"input",14),t.TgZ(29,"div",3)(30,"label",15),t._uU(31,"Creation tags"),t.qZA(),t.YNc(32,J,2,1,"span",5),t.qZA(),t.TgZ(33,"div",16),t.YNc(34,Y,2,1,"div",17),t.qZA(),t.YNc(35,B,2,0,"button",18),t.TgZ(36,"div",3)(37,"app-button",19),t._uU(38,"Create card"),t.qZA(),t.TgZ(39,"app-button",20),t.NdJ("click",function(){return i.onReset()}),t._uU(40,"Reset form"),t.qZA()()()()),2&a&&(t.xp6(3),t.Q6J("formGroup",i.dataNewCard),t.xp6(4),t.Q6J("ngIf",i.isShowTitleError),t.xp6(5),t.Q6J("ngIf",i.isShowDescriptionError),t.xp6(5),t.Q6J("ngIf",i.isShowImgError),t.xp6(5),t.Q6J("ngIf",i.isShowLinkVideoError),t.xp6(5),t.Q6J("ngIf",i.isShowCreationDateError),t.xp6(5),t.Q6J("ngIf",i.isShowTagsError),t.xp6(2),t.Q6J("ngForOf",i.tags.controls),t.xp6(1),t.Q6J("ngIf",i.isShowTagsAddButton))},dependencies:[d.sg,d.O5,_.r,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u,n.CE],styles:["[_nghost-%COMP%]{display:block;width:100%}.admin[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;background:#F2F2F2;max-width:350px;margin:45px auto;padding:27px 20px;font-style:normal;line-height:normal;border-radius:5px}.admin--title[_ngcontent-%COMP%]{width:100%;color:#000;font-size:18px;line-height:22px;font-weight:700;text-align:start;margin-bottom:5px}.admin--form-button[_ngcontent-%COMP%]{margin-top:20px}.admin--form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:space-between;width:100%}.admin--form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:10px;color:#828282;padding-left:5px;margin-bottom:4px}.admin--form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:block;width:100%;background-color:#e0e0e0;border:none;font-size:12px;color:#000;padding:12px 9px;margin-bottom:5px;border:solid 1px transparent}.admin--form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none}.admin--form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#929292;font-size:10px}.admin--form[_ngcontent-%COMP%]   input.ng-valid.ng-dirty[_ngcontent-%COMP%]{border:solid 1px #117C23}.admin--form[_ngcontent-%COMP%]   input.ng-invalid.ng-dirty.ng-touched[_ngcontent-%COMP%]{border:solid 1px #D83E3E}.admin--form[_ngcontent-%COMP%]   .input-label[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:space-between;font-size:10px;color:#d83e3e}.admin[_ngcontent-%COMP%]   form.ng-submitted[_ngcontent-%COMP%]   input.ng-invalid[_ngcontent-%COMP%]{border:solid 1px #D83E3E}.tags[_ngcontent-%COMP%]{display:flex;width:100%;align-items:center;flex-direction:column;justify-content:center;gap:5px}.tags[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]{font-size:10px;width:100%}.tags[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;width:100%;padding:5px 10px;text-align:center;margin:0}.tags[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]   input.ng-valid.ng-dirty.ng-touched[_ngcontent-%COMP%]{color:#fff;font-weight:700;background-color:#828282;border-radius:3px}.tags[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]   input.ng-invalid.ng-dirty[_ngcontent-%COMP%]{border:solid 1px #D83E3E}.tags-button[_ngcontent-%COMP%]{margin-top:15px;border:none;border-radius:5px;background-color:#2f80ed;padding:5px;color:#fff;box-shadow:2.51599px 0 5.03198px #2f80ed;cursor:pointer}.tags-button[_ngcontent-%COMP%]:hover{box-shadow:none;transition:all .5s;background-color:#2f80ed}"]})}return e})(),canActivate:[l(8036).p]}];let Q=(()=>{class e{static#t=this.\u0275fac=function(a){return new(a||e)};static#e=this.\u0275mod=t.oAB({type:e});static#r=this.\u0275inj=t.cJS({imports:[m.Bz.forChild(j),m.Bz]})}return e})();var G=l(6208);let K=(()=>{class e{static#t=this.\u0275fac=function(a){return new(a||e)};static#e=this.\u0275mod=t.oAB({type:e});static#r=this.\u0275inj=t.cJS({imports:[d.ez,Q,G.m,n.UX]})}return e})()},2490:(b,h,l)=>{l.d(h,{r:()=>m});var d=l(5879);const n=["*"];let m=(()=>{class u{constructor(){this.type="button"}static#t=this.\u0275fac=function(g){return new(g||u)};static#e=this.\u0275cmp=d.Xpm({type:u,selectors:[["app-button"]],inputs:{type:"type"},ngContentSelectors:n,decls:2,vars:1,consts:[[3,"type"]],template:function(g,f){1&g&&(d.F$t(),d.TgZ(0,"button",0),d.Hsn(1),d.qZA()),2&g&&d.s9C("type",f.type)},styles:["button[_ngcontent-%COMP%]{width:120px;height:32px;border:none;border-radius:5px;background-color:#2f80ed;color:#fff;box-shadow:2.51599px 0 5.03198px #2f80ed;cursor:pointer}button[_ngcontent-%COMP%]:hover{box-shadow:none;transition:all .5s;background-color:#85b9ff}"]})}return u})()}}]);